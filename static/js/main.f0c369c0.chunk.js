(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports=n(36)},20:function(e,t,n){},22:function(e,t,n){},24:function(e,t,n){},26:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(12),r=n.n(i),c=(n(20),n(2)),s=n(3),l=n(6),u=n(4),h=n(5),d=(n(22),n(24),n(1)),p=(n(26),n(7)),v=n(13),m=n.n(v),g=n(8),f=n.n(g),y=function(e){return function(t){var n=t;t instanceof window.Event||(n=t.nativeEvent);var a=null;if(n.touches&&n.touches.length){var o=n.touches[0];a={x:o.clientX,y:o.clientY}}else n.clientX&&n.clientY&&(a={x:n.clientX,y:n.clientY});for(var i=arguments.length,r=new Array(i>1?i-1:0),c=1;c<i;c++)r[c-1]=arguments[c];return e.apply(void 0,[a,t].concat(r))}},T=function(){function e(t,n,a){Object(c.a)(this,e),this._listenersAdded=!1,this._currentAnimationFrame=null,this._onTouchStart=t,this._onTouchMove=n,this._onTouchEnd=a,this._handleTouchStart=y(this._handleTouchStart.bind(this)),this._handleMouseDown=y(this._handleMouseDown.bind(this)),this._handleTouchMove=y(this._handleTouchMove.bind(this)),this._handleTouchEnd=y(this._handleTouchEnd.bind(this))}return Object(s.a)(e,[{key:"listeners",value:function(e,t,n){var a=this;return{onTouchStart:function(n){return a._handleTouchStart(n,e,t)},onMouseDown:function(t){return a._handleMouseDown(t,e,n)}}}},{key:"removeListeners",value:function(){this._listenersAdded=!1,document.removeEventListener("touchmove",this._handleTouchMove),document.removeEventListener("touchend",this._handleTouchEnd),document.removeEventListener("touchcancel",this._handleTouchEnd),document.removeEventListener("mousemove",this._handleTouchMove),document.removeEventListener("mouseup",this._handleTouchEnd)}},{key:"cancelAnimationFrame",value:function(){f.a.cancel(this._currentAnimationFrame),this._currentAnimationFrame=null}},{key:"_addTouchListeners",value:function(){this._listenersAdded=!0,document.addEventListener("touchmove",this._handleTouchMove),document.addEventListener("touchend",this._handleTouchEnd),document.addEventListener("touchcancel",this._handleTouchEnd)}},{key:"_addMouseListeners",value:function(){this._listenersAdded=!0,document.addEventListener("mousemove",this._handleTouchMove),document.addEventListener("mouseup",this._handleTouchEnd)}},{key:"_handleTouchStart",value:function(e,t,n,a){this._listenersAdded||(this._addTouchListeners(),n.props.onTouchStart&&n.props.onTouchStart(t),a&&a(t),this._onTouchStart(e))}},{key:"_handleMouseDown",value:function(e,t,n,a){this._listenersAdded||(this._addMouseListeners(),n.props.onMouseDown&&n.props.onMouseDown(t),a&&a(t),this._onTouchStart(e))}},{key:"_handleTouchMove",value:function(e){var t=this;this._currentAnimationFrame||(this._currentAnimationFrame=f()(function(){t._currentAnimationFrame=null,t._onTouchMove(e)}))}},{key:"_handleTouchEnd",value:function(e){this.cancelAnimationFrame(),this.removeListeners(),this._onTouchEnd(e)}}]),e}(),b=n(14),E=[["left","dx",_],["top","dy",_],["bottom","dy",w],["right","dx",w],["translateX","dx",_],["translateY","dy",_]];function _(e,t){return e+t}function w(e,t){return _(e,-t)}var S=function(e,t){return E.reduce(function(n,a){var o=Object(b.a)(a,3),i=o[0],r=o[1],c=o[2];return void 0!==e[i]&&(n[i]=c(e[i],t[r])),n},{})},O=function(e,t){var n=e.x,a=e.y;return{dx:t.x-n,dy:t.y-a}},j={initial:null,current:null,deltas:{dx:0,dy:0}},k=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state=j,n._touchHandler=new T(n.handleTouchStart.bind(Object(p.a)(Object(p.a)(n))),n.handleTouchMove.bind(Object(p.a)(Object(p.a)(n))),n.handleTouchEnd.bind(Object(p.a)(Object(p.a)(n)))),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"passThroughState",value:function(){var e=this.props.position,t=this.state,n=t.deltas,a=t.current,o=S(e,n);return Object(d.a)({},o,n,a)}},{key:"handleTouchStart",value:function(e){this.setState({initial:e,current:e})}},{key:"handleTouchMove",value:function(e){var t=this.state,n=t.deltas,a=t.current,o=O(a,e),i=S(this.props.position,o);this.props.onDrag&&this.props.onDrag(Object(d.a)({},i,a));var r={dx:n.dx+o.dx,dy:n.dy+o.dy};this.setState({deltas:r,current:e})}},{key:"handleTouchEnd",value:function(){this.props.onDragEnd&&this.props.onDragEnd()}},{key:"render",value:function(){var e=this.props,t=e.onTouchStart,n=e.onMouseDown,a=e.children,i=e.__passThrough,r=Object(d.a)({},i,this.passThroughState()),c=m()(a)?a(Object(d.a)({},r)):a,s=Object(d.a)({},this._touchHandler.listeners(c,t,n));return c.type.propTypes&&c.type.propTypes.hasOwnProperty("__passThrough")&&(s.__passThrough=r),o.a.cloneElement(o.a.Children.only(c),s)}}]),t}(o.a.Component),D=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={dragging:!1,height:null,initialTouchX:null,initialTouchY:null,parentX:null,parentY:null,touchX:null,touchY:null,width:null},n.DraggableParent=o.a.createRef(),n.handleMouseDown=function(e){console.log("handleMouseDown");var t=n.props.onStrikeStart;if(n.DraggableParent.current){var a=n.DraggableParent.current,o=a.offsetWidth,i=a.offsetHeight,r=a.offsetLeft,c=a.offsetTop,s=(e.clientX-r)/o,l=(e.clientY-c)/i;n.setState({dragging:!0,height:i,initialTouchX:s,initialTouchY:l,parentX:r,parentY:c,touchX:s,touchY:l,width:o,lastEvent:"handleMouseDown"}),t&&t({touchY:l})}},n.handleTouchStart=function(e){console.log("handleTouchStart");var t=n.props.onStrikeStart;n.setState({lastEvent:"handleTouchStart"}),t&&t()},n.handleDrag=function(e){console.log("handleDrag");var t=n.props.onStrike,a=n.state,o=a.dragging,i=a.height,r=a.parentX,c=a.parentY,s=a.width;if(o){var l=(e.x-r)/s,u=(e.y-c)/i;if(l<0||l>1||u<0||u>1)return n.setState({dragging:!1}),void n.handleDragEnd();n.setState({touchX:l,touchY:u,lastEvent:"handleDrag"}),t&&t({touchY:u})}},n.handleDragEnd=function(){console.log("handleDragEnd");var e=n.props.onStrikeEnd;n.setState({dragging:!1,lastEvent:"handleDragEnd"}),e&&e()},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.style;return o.a.createElement("div",{ref:this.DraggableParent,style:Object(d.a)({},t,{position:"relative"})},o.a.createElement(k,{onMouseDown:this.handleMouseDown,onTouchStart:this.handleTouchStart,onDrag:this.handleDrag,onDragEnd:this.handleDragEnd,position:{left:0,top:0}},function(n){return o.a.createElement("div",null,o.a.createElement("div",{style:{userSelect:"none"}},"Drag me",o.a.createElement("br",null),"X: ",e.state.touchX,o.a.createElement("br",null),"Y: ",e.state.touchY,o.a.createElement("br",null),"Last event: ",e.state.lastEvent),o.a.createElement("div",{style:Object(d.a)({},t,{position:"absolute",width:"100%",height:"100%",top:"0",left:"0"})}))}))}}]),t}(a.Component),x={c:261.6,d:293.7,e:329.6},A=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={playing:!1,context:window.AudioContext&&new window.AudioContext||window.webkitAudioContext&&new window.webkitAudioContext||null},n.handleClick=function(){var e=n.state,t=e.context;e.playing?n.gainNode.gain.exponentialRampToValueAtTime(1e-5,t.currentTime+.4):n.gainNode.gain.exponentialRampToValueAtTime(1,t.currentTime+.1),n.setState(function(e){return{playing:!e.playing}})},n.handleStrikeStart=function(){console.log("handleStrikeStart");var e=n.state.context;n.gainNode.gain.exponentialRampToValueAtTime(1,e.currentTime+.2),n.setState({playing:!0})},n.handleStrikeEnd=function(){console.log("handleStrikeEnd");var e=n.state.context;n.gainNode.gain.exponentialRampToValueAtTime(1e-5,e.currentTime+.4),n.setState({playing:!1})},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.note,t=this.state.context;this.gainNode=t.createGain(),this.oscillator=t.createOscillator(),this.oscillator.type="sine",this.oscillator.frequency.value=x[e],this.oscillator.start(0),this.gainNode.gain.setValueAtTime(1e-4,t.currentTime),this.oscillator.connect(this.gainNode),this.gainNode.connect(t.destination)}},{key:"render",value:function(){var e=this.props.style;return o.a.createElement("div",{className:"Key",style:Object(d.a)({},e,{display:"grid",gridTemplateRows:"1fr",gridTemplateColumns:"1fr",border:"1px solid lightgray",backgroundColor:this.state.playing?"pink":"ivory"})},o.a.createElement(D,{onStrikeStart:this.handleStrikeStart,onStrike:function(){},onStrikeEnd:this.handleStrikeEnd,style:{display:"grid",gridTemplateRows:"1fr",gridTemplateColumns:"1fr"}}))}}]),t}(a.Component),M=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e={flex:"0 0 50%"};return o.a.createElement("div",{className:"KeyBoard",style:{display:"flex",flexFlow:"row nowrap",alignItems:"stretch",justifyContent:"space-between",height:"100vh"}},o.a.createElement(A,{note:"c",style:Object(d.a)({},e)}),o.a.createElement(A,{note:"d",style:Object(d.a)({},e)}))}}]),t}(a.Component),L=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",null,o.a.createElement(M,null)))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[15,2,1]]]);
//# sourceMappingURL=main.f0c369c0.chunk.js.map